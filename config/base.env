# Base configuration (shared defaults for all environments)
# This file contains settings that are the same in local and AWS environments.
# Environment-specific overrides are in local.env or aws.env.

# =============================================================================
# BUCKET LAYOUT (S3 / MinIO)
# =============================================================================
#
# tm-lakehouse-landing-zone/                    <- Raw data lands here
#   └── course_id=<course>/ingest_date=<date>/<filename>.csv
#
# tm-lakehouse-source-store/                    <- Silver: cleaned, conformed
#   └── warehouse/silver/fact_telemetry_event/
#       ├── metadata/
#       └── data/course_id=X/event_date=Y/
#
# tm-lakehouse-serve/                           <- Gold: analytics-ready
#   └── warehouse/gold/
#       ├── pace_summary_by_round/
#       ├── signal_quality_rounds/
#       └── device_health_errors/
#
# tm-lakehouse-quarantine/                      <- Invalid data
#   └── silver/course_id=X/ingest_date=Y/
#
# tm-lakehouse-observability/                   <- Run logs & artifacts
#   ├── bronze/run_id=<id>.json
#   └── silver/course_id=X/ingest_date=Y/
#
# =============================================================================

TM_BUCKET_LANDING=tm-lakehouse-landing-zone
TM_BUCKET_SOURCE=tm-lakehouse-source-store
TM_BUCKET_SERVE=tm-lakehouse-serve
TM_BUCKET_QUARANTINE=tm-lakehouse-quarantine
TM_BUCKET_OBSERVABILITY=tm-lakehouse-observability

# =============================================================================
# DATABASE SCHEMAS (Iceberg namespaces)
# =============================================================================

TM_DB_SILVER=silver
TM_DB_GOLD=gold

# =============================================================================
# ICEBERG WAREHOUSE PATHS
# =============================================================================

TM_ICEBERG_WAREHOUSE_SILVER=s3://tm-lakehouse-source-store/warehouse
TM_ICEBERG_WAREHOUSE_GOLD=s3://tm-lakehouse-serve/warehouse

# =============================================================================
# API CONFIGURATION (for future use with TagMarshal API)
# =============================================================================
# TM_DATA_SOURCE controls where data comes from:
#   - "file" (default): Read CSV/JSON from local files
#   - "api": Fetch JSON from TagMarshal API

TM_DATA_SOURCE=file
TM_API_BASE_URL=https://api.tagmarshal.com
TM_API_TIMEOUT=30

# =============================================================================
# TOPOLOGY CONFIGURATION
# =============================================================================
# Controls how course topology is inferred from telemetry data.
# These settings help filter GPS artifacts and ensure reliable boundary detection.

TM_TOPOLOGY_MIN_FIXES_PER_SECTION=25
TM_TOPOLOGY_RELIABLE_RANGE_PAD=1

# =============================================================================
# DEFAULT S3 REGION
# =============================================================================

TM_S3_REGION=us-east-1

# =============================================================================
# OBSERVABILITY
# =============================================================================

TM_OBS_PREFIX=

# =============================================================================
# COORDINATE VALIDATION BOUNDS
# =============================================================================
# Used to detect invalid GPS coordinates (quarantine rows outside these bounds)

TM_COORD_MIN_LON=-180
TM_COORD_MAX_LON=180
TM_COORD_MIN_LAT=-90
TM_COORD_MAX_LAT=90

